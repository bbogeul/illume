{"source":"__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar IronRouterTitle,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nIronRouterTitle = (function(superClass) {\n  extend(IronRouterTitle, superClass);\n\n  function IronRouterTitle(router) {\n    var self;\n    this.router = router;\n    IronRouterTitle.__super__.constructor.call(this, this.router);\n    self = this;\n    this[\"default\"] = document.title || null;\n    if (this.title == null) {\n      this.title = new ReactiveVar(this[\"default\"]);\n    }\n    this.title.set = function(newValue) {\n      var oldValue;\n      oldValue = this.curValue;\n      if (_.isEqual(oldValue, newValue)) {\n\n      } else {\n        document.title = newValue;\n        return this.curValue = newValue;\n      }\n    };\n    this.router.onAfterAction(function() {\n      return self.getTitle();\n    });\n  }\n\n  IronRouterTitle.prototype.setTitle = function(title) {\n    if (_.isFunction(title)) {\n      title = title.apply(this.currentRoute);\n    }\n    if (_.isString(title)) {\n      return this.title.set(title);\n    }\n  };\n\n  IronRouterTitle.prototype.getTitle = function() {\n    return this.setTitle((function() {\n      var ref, ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8;\n      switch (false) {\n        case !((ref = this.currentRoute) != null ? (ref1 = ref.route) != null ? (ref2 = ref1.options) != null ? ref2.title : void 0 : void 0 : void 0):\n          return this.currentRoute.route.options.title;\n        case !(((ref3 = this.currentRoute) != null ? ref3.prototype : void 0) && _.has(this.currentRoute.prototype, 'title')):\n          return this.currentRoute.prototype['title'];\n        case !((ref4 = this.currentRoute) != null ? ref4.title : void 0):\n          return this.currentRoute.title;\n        case !(((ref5 = this.currentController) != null ? ref5.prototype : void 0) && _.has(this.currentController.prototype, 'title')):\n          return this.currentController.prototype['title'];\n        case !((ref6 = this.currentController) != null ? ref6.title : void 0):\n          return this.currentController.title;\n        case !((ref7 = this.router) != null ? (ref8 = ref7.options) != null ? ref8.title : void 0 : void 0):\n          return this.router.options.title;\n        default:\n          return this[\"default\"];\n      }\n    }).call(this));\n  };\n\n  return IronRouterTitle;\n\n})(IronRouterHelper);\n\nMeteor.startup(function() {\n  return new IronRouterTitle(Router);\n});\n","sourceMap":{"version":3,"file":"/iron-router-title.coffee.js","sourceRoot":"","sources":["/packages/ostrio_iron-router-title/iron-router-title.coffee"],"names":[],"mappings":";AAAA,IAAA,eAAA;EAAA;6BAAA;;AAAA;AACE,qCAAA,CAAA;;AAAa,EAAA,yBAAC,MAAD,GAAA;AACX,QAAA,IAAA;AAAA,IADY,IAAC,CAAA,SAAD,MACZ,CAAA;AAAA,IAAA,iDAAM,IAAC,CAAA,MAAP,CAAA,CAAA;AAAA,IACA,IAAA,GAAa,IADb,CAAA;AAAA,IAEA,IAAC,CAAA,SAAA,CAAD,GAAa,QAAQ,CAAC,KAAT,IAAkB,IAF/B,CAAA;;MAGA,IAAC,CAAA,QAAgB,IAAA,WAAA,CAAY,IAAC,CAAA,SAAA,CAAb;KAHjB;AAAA,IAKA,IAAC,CAAA,KAAK,CAAC,GAAP,GAAa,SAAC,QAAD,GAAA;AACX,UAAA,QAAA;AAAA,MAAA,QAAA,GAAW,IAAC,CAAA,QAAZ,CAAA;AACA,MAAA,IAAG,CAAC,CAAC,OAAF,CAAU,QAAV,EAAoB,QAApB,CAAH;AAAA;OAAA,MAAA;AAGE,QAAA,QAAQ,CAAC,KAAT,GAAiB,QAAjB,CAAA;eACA,IAAC,CAAA,QAAD,GAAY,SAJd;OAFW;IAAA,CALb,CAAA;AAAA,IAaA,IAAC,CAAA,MAAM,CAAC,aAAR,CAAsB,SAAA,GAAA;aAAG,IAAI,CAAC,QAAL,CAAA,EAAH;IAAA,CAAtB,CAbA,CADW;EAAA,CAAb;;AAAA,4BAgBA,QAAA,GAAU,SAAC,KAAD,GAAA;AACR,IAAA,IAAsC,CAAC,CAAC,UAAF,CAAa,KAAb,CAAtC;AAAA,MAAA,KAAA,GAAQ,KAAK,CAAC,KAAN,CAAY,IAAC,CAAA,YAAb,CAAR,CAAA;KAAA;AACA,IAAA,IAAoB,CAAC,CAAC,QAAF,CAAW,KAAX,CAApB;aAAA,IAAC,CAAA,KAAK,CAAC,GAAP,CAAW,KAAX,EAAA;KAFQ;EAAA,CAhBV,CAAA;;AAAA,4BAoBA,QAAA,GAAU,SAAA,GAAA;WACR,IAAC,CAAA,QAAD;;AAAU,cAAA,KAAA;AAAA,oHAC0B,CAAE,iCAD5B;iBACuC,IAAC,CAAA,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,MADnE;AAAA,yDAEU,CAAE,mBAAf,IAA6B,CAAC,CAAC,GAAF,CAAM,IAAC,CAAA,YAAY,CAAA,SAAnB,EAAuB,OAAvB,EAF1B;iBAE8D,IAAC,CAAA,YAAY,CAAA,SAAG,CAAA,OAAA,EAF9E;AAAA,wDAGU,CAAE,eAHZ;iBAGuB,IAAC,CAAA,YAAY,CAAC,MAHrC;AAAA,8DAIe,CAAE,mBAApB,IAAkC,CAAC,CAAC,GAAF,CAAM,IAAC,CAAA,iBAAiB,CAAA,SAAxB,EAA4B,OAA5B,EAJ/B;iBAIwE,IAAC,CAAA,iBAAiB,CAAA,SAAG,CAAA,OAAA,EAJ7F;AAAA,6DAKe,CAAE,eALjB;iBAK4B,IAAC,CAAA,iBAAiB,CAAC,MAL/C;AAAA,kFAMa,CAAE,wBANf;iBAM0B,IAAC,CAAA,MAAM,CAAC,OAAO,CAAC,MAN1C;AAAA;iBAOH,IAAC,CAAA,SAAA,EAPE;AAAA;iBAAV,EADQ;EAAA,CApBV,CAAA;;yBAAA;;GAD4B,iBAA9B,CAAA;;AAAA,MA+BM,CAAC,OAAP,CAAe,SAAA,GAAA;SAAO,IAAA,eAAA,CAAgB,MAAhB,EAAP;AAAA,CAAf,CA/BA,CAAA","sourcesContent":["class IronRouterTitle extends IronRouterHelper\n  constructor: (@router) -> \n    super @router\n    self       = @\n    @default   = document.title or null\n    @title    ?= new ReactiveVar @default\n    \n    @title.set = (newValue) ->\n      oldValue = @curValue\n      if _.isEqual(oldValue, newValue)\n        return\n      else\n        document.title = newValue\n        @curValue = newValue\n\n    @router.onAfterAction -> self.getTitle()\n\n  setTitle: (title) ->\n    title = title.apply(@currentRoute) if _.isFunction title\n    @title.set title if _.isString title\n\n  getTitle: ->\n    @setTitle switch\n      when @currentRoute?.route?.options?.title then @currentRoute.route.options.title\n      when @currentRoute?.prototype and _.has @currentRoute::, 'title' then @currentRoute::['title']\n      when @currentRoute?.title then @currentRoute.title\n      when @currentController?.prototype and _.has @currentController::, 'title' then @currentController::['title']\n      when @currentController?.title then @currentController.title\n      when @router?.options?.title then @router.options.title\n      else @default\n\nMeteor.startup -> new IronRouterTitle Router"]}}